<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check for allergies</title>
    <link rel="stylesheet" href="allergy.css"/>
</head>
<body>
    <div id = header><img src="../logo.png" width="111" height="72" alt="밥뭇나로고"></div>
    <form action="diabetes.html" method="POST">
        <div id = container>
            <div class="title">어떤 <span style="color: #DE5D00">알러지</span>가 있으신가요?</div>
            <div class="inputBox">
              <input type="text" placeholder="알러지를 입력해주세요" class="input" id="allergyInput">
              <button type="button" class="plusBtn" id="plusBtn">추가</button>
            </div>
            <ul id = allergyList>
                <!--js작성-->
            </ul>
        </div>
        <div id = footer>
            <button type="submit" class="nextPageBtn">다음</button>
        </div>
    </form>
    <script>
        const allergyArray = ['땅콩', '우유'];
        const plusBtn = document.getElementById('plusBtn');
        const delBtn = document.getElementsByClassName('delBtn');
        const allergyList = document.getElementById('allergyList')
        const allergyInput = document.getElementById('allergyInput')

        plusBtn.addEventListener("click", addAllergy);
        allergyList.addEventListener("click", delAllergy);

        renderAllergyList()

        function addAllergy(){
            let allergyValue = allergyInput.value.trim();

            if(allergyValue){
                allergyArray.unshift(allergyValue);
                renderAllergyList();
                allergyInput.value = '';
            }
        }
        function delAllergy(event) {
            if (event.target.classList.contains('delBtn')) {
                let allergyToRemove = event.target.parentElement.textContent.slice(0, -1); // 'X' 제거
                allergyArray.splice(allergyArray.indexOf(allergyToRemove), 1); // 해당 항목 제거
                renderAllergyList();
            }
        }

        function renderAllergyList(){
            const allergyList = document.getElementById('allergyList');
            allergyList.innerHTML = '';

            allergyArray.forEach(function (allergyItem){
                let li = document.createElement('li');
                li.innerHTML = allergyItem + "<button type='button' class='delBtn'>X</button>";
                allergyList.appendChild(li);
            });
            allergyInput.focus();
        }
    </script>
</body>
</html>
